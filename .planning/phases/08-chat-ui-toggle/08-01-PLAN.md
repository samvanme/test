# Plan 08-01: Chat UI Use Case Toggle

## Objective

Transform the side-by-side two-agent demo into a single chat window with tabbed use case selection (Sales, Support, Operations) and carousel-style auto-advancing simulation.

## Execution Context

**Phase**: 8 — Chat UI Use Case Toggle
**Plan**: 08-01
**Estimated Tasks**: 10
**Dependencies**: None (builds on existing demo infrastructure)

**Key Files**:
- `src/components/demo/DemoController.jsx` — Main refactor target
- `src/components/demo/DemoAgent.jsx` — Reuse for single panel
- `src/components/VoiceDemo.jsx` — Remove phone CTA
- `tailwind.config.js` — Add horizontal slide animations

**Research**: `.planning/phases/08-chat-ui-toggle/chat-ui-toggle-RESEARCH.md`
**Context**: `.planning/phases/08-chat-ui-toggle/chat-ui-toggle-CONTEXT.md`

---

## Tasks

### Task 1: Add Horizontal Slide Animations to Tailwind Config

**Goal**: Extend animation system with slide-left/slide-right for carousel transitions

**Actions**:
1. Add `slide-left` keyframe to `tailwind.config.js`:
   ```javascript
   'slide-left': {
     '0%': { transform: 'translateX(100%)', opacity: '0' },
     '100%': { transform: 'translateX(0)', opacity: '1' },
   },
   'slide-right': {
     '0%': { transform: 'translateX(-100%)', opacity: '0' },
     '100%': { transform: 'translateX(0)', opacity: '1' },
   },
   ```
2. Add corresponding animation utilities
3. Ensure reduced motion support

**Verification**: Animation classes available in Tailwind

---

### Task 2: Create DemoTabs Component with ARIA Accessibility

**Goal**: Build accessible tab navigation for 3 use cases

**Actions**:
1. Create `src/components/demo/DemoTabs.jsx`
2. Implement ARIA tablist pattern:
   - `role="tablist"`, `role="tab"`, `aria-selected`, `aria-controls`
   - Roving tabIndex (only active tab = 0)
3. Add keyboard navigation:
   - Arrow Left/Right to navigate tabs
   - Home/End for first/last
4. Style with distinct colors per tab:
   - Sales: `bg-brand-blue text-white`
   - Support: `bg-white text-void`
   - Operations: `bg-amber-500 text-void`
5. Inactive tabs: `opacity-60` filter
6. Add focus-visible outline (3px white, project standard)

**Props**:
```typescript
interface DemoTabsProps {
  activeTab: 'sales' | 'support' | 'operations';
  onTabChange: (tab: string) => void;
  disabled?: boolean;
}
```

**Verification**: Tabs navigate with keyboard, screen reader announces selection

---

### Task 3: Create Operations Scenarios and Agent Config

**Goal**: Add third use case (Operations/HR) with simulated conversations

**Actions**:
1. In `DemoController.jsx`, add `OPERATIONS_SCENARIOS` array with 4 scenarios:
   - Scenario 1: Interview scheduling
   - Scenario 2: Candidate qualification call
   - Scenario 3: Reference check follow-up
   - Scenario 4: Onboarding coordination
2. Each scenario: 4 messages with tool calls (same structure as existing)
3. Create `USE_CASES` config object:
   ```javascript
   const USE_CASES = {
     sales: { name: 'Sales', agent: 'Alex AI', color: 'brand-blue', scenarios: SALES_SCENARIOS },
     support: { name: 'Support', agent: 'Sarah AI', color: 'white', scenarios: SERVICE_SCENARIOS },
     operations: { name: 'Operations', agent: 'Jordan AI', color: 'amber-500', scenarios: OPERATIONS_SCENARIOS },
   };
   ```
4. Rename `REVENUE_SCENARIOS` → `SALES_SCENARIOS` for consistency

**Verification**: Operations scenarios render in simulation

---

### Task 4: Add Operations Agent Styling to DemoAgent

**Goal**: Support third agent type with amber accent color

**Actions**:
1. In `DemoAgent.jsx`, add `operations` to `agentStyles` object:
   ```javascript
   operations: {
     accent: 'bg-amber-500',
     accentBorder: 'border-amber-500',
     accentText: 'text-amber-500',
     accentBg: 'bg-amber-500/10',
     buttonBg: 'bg-amber-500',
     buttonBorder: 'border-white',
     buttonShadow: 'shadow-brutal-sm hover:shadow-brutal',
     buttonTextColor: 'text-slate-900',
     waveformColor: 'amber',
     transcriptAccent: 'amber',
   },
   ```
2. Update `agentType` PropTypes to include `'operations'`
3. Add amber waveform color variant if needed in Waveform component

**Verification**: Operations agent renders with amber styling

---

### Task 5: Create DemoCarousel Component

**Goal**: Build carousel container with horizontal slide transitions

**Actions**:
1. Create `src/components/demo/DemoCarousel.jsx`
2. Structure with CSS transforms (not scroll-snap, for programmatic control):
   ```jsx
   <div className="relative overflow-hidden">
     <div
       className="flex transition-transform duration-500"
       style={{ transform: `translateX(-${activeIndex * 100}%)` }}
     >
       {slides.map(slide => (
         <div className="flex-shrink-0 w-full">{slide}</div>
       ))}
     </div>
   </div>
   ```
3. Accept `activeIndex` prop for current slide
4. Use `ease-out-expo` timing function (project standard)
5. Respect `prefers-reduced-motion` (instant transitions)

**Props**:
```typescript
interface DemoCarouselProps {
  activeIndex: number;
  children: React.ReactNode[];
  onTransitionEnd?: () => void;
}
```

**Verification**: Slides transition smoothly on index change

---

### Task 6: Refactor DemoController to Single Panel Layout

**Goal**: Replace 2-column grid with single chat window + tabs

**Actions**:
1. Remove `grid lg:grid-cols-2` layout from DemoController
2. Add `DemoTabs` at top of container
3. Add `DemoCarousel` containing 3 `DemoAgent` components (one per use case)
4. Refactor state:
   - Replace `activeAgent` with `activeTab`
   - Track `carouselIndex` during simulation
   - Add `isSimulating` boolean
5. Wire tab changes:
   - During simulation: skip carousel to that tab's simulation
   - After simulation: switch to interactive mode for that agent
6. Maintain separate message arrays per use case:
   ```javascript
   const [messages, setMessages] = useState({
     sales: [],
     support: [],
     operations: [],
   });
   ```

**Verification**: Single panel displays with tab navigation working

---

### Task 7: Implement Carousel Auto-Advance Logic

**Goal**: Auto-play through all 3 use cases during simulation

**Actions**:
1. In DemoController, implement auto-advance:
   - After each use case's simulation completes (~3-4 messages)
   - Wait 1 second, then advance to next tab
   - After all 3 complete, show transition prompt
2. Add pause on hover/focus:
   ```javascript
   const [isPaused, setIsPaused] = useState(false);
   // Pause when container has :hover or :focus-within
   ```
3. Tab click during simulation:
   - Clear current simulation timers
   - Jump to clicked tab's simulation
   - Continue from there
4. Timing: ~3 seconds per message, ~10-12 seconds per use case

**Verification**: Carousel auto-advances, pauses on hover, skips on tab click

---

### Task 8: Update Transition Prompt for Tab Selection

**Goal**: After simulation, prompt user to select a use case for interactive mode

**Actions**:
1. Modify transition prompt text:
   - Current: "Try Interactive Demo" button
   - New: "Select a use case above to start chatting"
2. When transition prompt shows:
   - Tabs become fully interactive (not just skip)
   - Clicking tab enters interactive mode for that agent
3. Clear all simulated messages when entering interactive mode
4. Add subtle animation to tabs when prompt appears (pulse or glow)

**Verification**: User can select any tab to enter interactive mode

---

### Task 9: Remove Phone CTA from VoiceDemo

**Goal**: Clean up bottom section per user request

**Actions**:
1. In `VoiceDemo.jsx`, remove:
   - Phone link `<a href={tel:...}>Try live agent now</a>`
   - "Available 24/7" text
   - The entire CTA section (lines 78-98)
2. Adjust spacing if needed after removal

**Verification**: No phone CTA visible in demo section

---

### Task 10: Polish and Accessibility Testing

**Goal**: Ensure feature is polished and accessible

**Actions**:
1. Keyboard testing:
   - Tab into tabs → Arrow keys navigate → Enter activates
   - Tab past carousel works (no focus trap)
2. Screen reader testing (manual):
   - Tabs announce selected state
   - Slide changes announced (aria-live)
3. Reduced motion testing:
   - Carousel transitions instant with `prefers-reduced-motion`
4. Mobile testing:
   - Touch targets ≥ 44px
   - Tabs legible on small screens
5. Visual polish:
   - Tab color contrast meets 3:1 (WCAG 1.4.11)
   - Focus outlines visible
   - Smooth transitions

**Verification**: All accessibility checks pass

---

## Verification

After all tasks complete:
1. `npm run dev` — Site loads without errors
2. `npm run lint` — No ESLint errors
3. `npm run build` — Production build succeeds
4. Manual test:
   - [ ] Carousel auto-advances through 3 use cases
   - [ ] Tabs highlight current use case
   - [ ] Clicking tab skips to that simulation
   - [ ] Pause on hover works
   - [ ] After simulation, tabs enter interactive mode
   - [ ] Each agent has correct color styling
   - [ ] Keyboard navigation works
   - [ ] Phone CTA removed

---

## Success Criteria

- [ ] Single chat window replaces side-by-side layout
- [ ] 3 tabs (Sales, Support, Operations) with distinct colors
- [ ] Carousel auto-advances with horizontal slide animation
- [ ] Tabs skip during simulation, select agent after
- [ ] Phone CTA removed
- [ ] WCAG 2.1 AA compliant (tabs, carousel, focus)
- [ ] Reduced motion respected

---

## Output

On completion:
1. Commit changes with message: `feat(demo): add tabbed use case carousel with single chat window`
2. Update `.planning/STATE.md` with phase completion
3. Push to branch

---

*Plan created: 2026-01-13*
